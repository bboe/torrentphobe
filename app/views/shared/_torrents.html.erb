<% display_categories ||= false %>
<% allow_sorting = true if allow_sorting.nil? %>
<% if torrents.length > 0 %>
<table>
  <tr>
    <th></th>
    <th style="min-width: 480px; width: 100%">
      <% if allow_sorting %><%= sort_link "Name", :name %><% else %><%= "Name" %><% end %>
    </th>
    <th style="padding-left: 10px; text-align: center;">
      <% if allow_sorting %><%= sort_link "Size", :size %><% else %><%= "Size" %><% end %>
    </th>
    <% if display_categories %>
    <th style="text-align: center;">
      <% if allow_sorting %><%= sort_link "Category", :category_id %><% else %><%= "Category" %><% end %>
    </th>
    <th style="text-align: center;"><%= sort_link "Seeders/<br 
/>Leechers", :category %></th>
    <% end %>
  </tr>

<% for torrent in torrents %>
  <tr class="<%= cycle('even', 'odd') %>">
    <td style="border: none; padding: 0;"><%= link_to image_tag("download_arrow.png"), :controller => :torrents, :action => :download_torrent_file, :id => torrent %></td>
    <td><%= link_to torrent.name, torrent %></td>
    <td style="padding-left: 10px; text-align: center;"><%=h display_size(torrent.size) %></td>
    <% if display_categories %>
    <td style="text-align: center; min-width: 100px;"><%=h torrent.category.name %></td>
    <td style="text-align: center; min-width: 100px;"><%= Swarm.get_seeders(torrent.id).to_s %>/<%= Swarm.get_leechers(torrent.id).to_s %></td>
    <% end %>
  </tr>
<% end %>
</table>
<% else %>
No torrents available
<% end %>
<br />
